# ===========================================
# Advancia Pay Backend - Environment Variables
# ===========================================
# Copy this file to .env and fill in your actual values

# ----- Server Configuration -----
NODE_ENV=development
PORT=4000
FRONTEND_URL=http://localhost:3000

# ----- Database -----
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/advancia_db

# ----- JWT Authentication -----
# Generate: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-64-chars
JWT_REFRESH_SECRET=your-refresh-secret-key-change-this-also-min-64-chars

# ----- Redis (Session & Cache) -----
REDIS_URL=redis://localhost:6379

# ----- Email Configuration -----
# Gmail SMTP for OTP and transactional emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-gmail-app-password

# Resend API (for marketing emails)
RESEND_API_KEY=re_your_resend_api_key

# SendGrid (for bulk emails - optional)
SENDGRID_API_KEY=SG.your_sendgrid_api_key

# ----- Payment Gateways -----
# Stripe
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key

# Cryptomus (Crypto Payments)
CRYPTOMUS_API_KEY=your_cryptomus_api_key
CRYPTOMUS_MERCHANT_ID=your_merchant_id
CRYPTOMUS_WEBHOOK_SECRET=your_webhook_secret

# ----- Custodial Wallet System -----
# ⚠️ CRITICAL SECURITY: Store these in a secure vault! Loss = loss of all user funds!
# Generate seed: node -e "console.log(require('bip39').generateMnemonic(256))"
WALLET_MASTER_SEED=your-24-word-bip39-mnemonic-seed-phrase-keep-this-super-secret-never-share

# Generate key: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
WALLET_ENCRYPTION_KEY=your-base64-encoded-32-byte-encryption-key-store-securely

# Admin wallet addresses for external crypto withdrawals (Coinbase, Binance, etc.)
ADMIN_BTC_WALLET_ADDRESS=your-coinbase-btc-wallet-address
ADMIN_ETH_WALLET_ADDRESS=your-coinbase-eth-wallet-address
ADMIN_USDT_WALLET_ADDRESS=your-coinbase-usdt-erc20-wallet-address

# ----- Monitoring & Logging -----
# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# OpenTelemetry (Tracing)
OTEL_SERVICE_NAME=advancia-backend
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces

# ----- Web Push Notifications -----
# Generate: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=your-vapid-public-key
VAPID_PRIVATE_KEY=your-vapid-private-key
VAPID_SUBJECT=mailto:your-email@example.com

# ----- AWS S3 (for database backups) -----
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
S3_BACKUPS_BUCKET=advancia-backups

# ----- Cloudflare (Optional CDN/DNS) -----
CLOUDFLARE_API_TOKEN=your-cloudflare-api-token
CLOUDFLARE_ZONE_ID=your-zone-id

# ----- Rate Limiting -----
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ----- CORS Origins (comma-separated) -----
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,https://advanciapayledger.com,https://www.advanciapayledger.com,https://app.advanciapayledger.com

# ----- Price Service (CoinGecko + Binance) -----
PRICE_CACHE_TTL=300

# ----- Admin Configuration -----
ADMIN_EMAIL=admin@advancia.com
ADMIN_USERNAME=admin

# ----- Feature Flags -----
ENABLE_2FA=true
ENABLE_EMAIL_VERIFICATION=true
ENABLE_WITHDRAWAL_APPROVALS=true

# ----- Development Only -----
DEBUG=false
LOG_LEVEL=info
ENABLE_SWAGGER=true
