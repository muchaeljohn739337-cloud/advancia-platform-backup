name = "advancia-api-gateway"
main = "worker.js"
compatibility_date = "2025-11-18"
workers_dev = true

# KV Namespace for rate limiting
[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "your-kv-namespace-id"

# Environment variables (set in Cloudflare dashboard)
[vars]
# BACKEND_URL will be set in dashboard
# INTERNAL_API_KEY will be set in dashboard
# STRIPE_SECRET_KEY will be set in dashboard (secret)
# CRYPTOMUS_API_KEY will be set in dashboard (secret)
# CRYPTOMUS_MERCHANT_ID will be set in dashboard

# Routes - map custom domain to worker
[[routes]]
pattern = "api.advanciapayledger.com/*"
zone_name = "advanciapayledger.com"

# Local development
[env.dev]
vars = { BACKEND_URL = "http://localhost:4000", INTERNAL_API_KEY = "dev-key" }

# Production
[env.production]
# Set via dashboard or wrangler secret
